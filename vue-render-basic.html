<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>渲染函数</title>
    <script src="https://cdn.bootcss.com/vue/2.5.9/vue.js"></script>
</head>

<body>
    <div id="app">
        <anchored-heading :level='1'>Hello Render!</anchored-heading>
        <anchored-heading :level='2'>{{message}}</anchored-heading>
        <anchored-heading :level='4'>{{number + 6}}</anchored-heading>
        <anchored-heading :level='3'>
            <child>placeholder</child>
        </anchored-heading>
    </div>
    <script>
        // 知识点：渲染函数基础；实例属性API；虚拟 DOM

        // Vue 推荐在绝大多数情况下使用 template 来创建 HTML。然而在一些场景中，需要 JavaScript 的完全编程的能力，这就是 render 函数，它比 template 更接近编译器。

        // 实例属性 vm.$slots 用来访问被插槽分发的内容。
        // 具名插槽有其相应的属性。default 属性包括了所有没有被包含在具名插槽中的节点。
        // 这个例子中，当不使用 slot 属性向组件中传递内容时，比如 anchored-heading 中的 Hello Render!，这些子元素被存储在组件实例中的 $slots.default中。

        // 【基础示例】
        Vue.component('anchored-heading', {
            render: function (createElement) {
                return createElement(
                    'h' + this.level, // tag name 标签名称
                    this.$slots.default // 子组件中的阵列
                )
            },
            props: {
                level: {
                    type: Number,
                    required: true
                }
            }
        })

        Vue.component('child', {
            template: `<p>I'm from child component!</p>`
        })


        // 虚拟 DOM
        // Vue 通过建立一个虚拟 DOM 对真实 DOM 发生的变化保持追踪。
        // createElement 返回的不是一个实际的 DOM 元素。它更准确的名字可能是 createNodeDescription，因为它所包含的信息会告诉 Vue 页面上需要渲染什么样的节点，及其子节点。
        // 这样的节点描述为“虚拟节点 (Virtual Node)”，简写“VNode”。“虚拟 DOM”是对由 Vue 组件树建立起来的整个 VNode 树的称呼。

        // createElement 参数
        // @returns {VNode}
        // createElement(
        //     // {String | Object | Function}
        //     // 一个 HTML 标签字符串，组件选项对象，或者一个返回值
        //     // 类型为 String/Object 的函数，必要参数
        //     'div',

        //     // {Object}
        //     // 一个包含模板相关属性的数据对象
        //     // 这样，您可以在 template 中使用这些属性。可选参数。
        //     {
        //         // (详情见下一节)
        //     },

        //     // {String | Array}
        //     // 子节点 (VNodes)，由 `createElement()` 构建而成，
        //     // 或使用字符串来生成“文本节点”。可选参数。
        //     [
        //         '先写一些文字',
        //         createElement('h1', '一则头条'),
        //         createElement(MyComponent, {
        //             props: {
        //                 someProp: 'foobar'
        //             }
        //         })
        //     ]
        // )

        // 深入 data 对象

        // 【完整示例】

        // 约束


        var vm = new Vue({
            el: '#app',
            data: {
                message: 'Data from instance',
                number: 5
            }
        })
    </script>
</body>

</html>